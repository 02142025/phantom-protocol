# Rewrite index.html with corrected path structure and link to external CSS
corrected_index_html = """<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>ðŸ”¥ PHANTOM PROTOCOL - Master Hub</title>
    <link rel="stylesheet" href="phantom-protocol/css/sudo-scrolls.css"/>
</head>
<body>
    <div class="container">
        <div class="header scroll-header">
            <h1 class="scroll-title">ðŸ”¥ PHANTOM PROTOCOL ðŸ”¥</h1>
            <div class="scroll-subtitle">Master Hub â€¢ Choose Your Path</div>
            <div class="scroll-warning">Educational Technology Platform v2.0</div>
        </div>

        <div class="scroll-grid">
            <div class="scroll-card" onclick="navigateToPage('protocol-guide.html')">
                <div class="status-indicator"></div>
                <div class="icon">ðŸ“‹</div>
                <a href="protocol-guide.html" class="nav-link">PROTOCOL GUIDE</a>
                <div class="nav-description">Foundational system + 8-block structure</div>
            </div>

            <div class="scroll-card" onclick="navigateToPage('incarceration-scroll.html')">
                <div class="status-indicator"></div>
                <div class="icon">ðŸ”“</div>
                <a href="incarceration-scroll.html" class="nav-link">INCARCERATION SCROLL</a>
                <div class="nav-description">Liberation theme with scoring and usage</div>
            </div>

            <div class="scroll-card" onclick="navigateToPage('all-themes.html')">
                <div class="status-indicator"></div>
                <div class="icon">ðŸŒŸ</div>
                <a href="all-themes.html" class="nav-link">ALL THEMES</a>
                <div class="nav-description">Medical, Education, Government, Financial</div>
            </div>

            <div class="scroll-card" onclick="navigateToPage('deployment-checklist.html')">
                <div class="status-indicator"></div>
                <div class="icon">âœ…</div>
                <a href="deployment-checklist.html" class="nav-link">DEPLOYMENT GUIDE</a>
                <div class="nav-description">Breath seal + scroll launch checklist</div>
            </div>

            <div class="scroll-card" onclick="navigateToPage('template-download.html')">
                <div class="status-indicator"></div>
                <div class="icon">ðŸ“¥</div>
                <a href="template-download.html" class="nav-link">TEMPLATE DOWNLOADS</a>
                <div class="nav-description">98-field scrolls ready for editing</div>
            </div>

            <div class="scroll-card coming-soon" onclick="showComingSoon()">
                <div class="status-indicator"></div>
                <div class="icon">ðŸ‘‘</div>
                <a href="#" class="nav-link">KINGDOM DASHBOARD</a>
                <div class="nav-description">Advanced module - COMING SOON</div>
            </div>
        </div>

        <div class="cta-section">
            <div class="cta-content">
                <h2>ðŸš€ READY TO BEGIN YOUR ASCENSION?</h2>
                <p>Start with the Protocol Guide, then choose your scroll path.</p>
                <div class="progress-text">
                    <span id="user-level">Level 1 Initiate</span> â€¢ 
                    <span id="total-points">0 Points</span> â€¢ 
                    <span id="completion-status">0% Complete</span>
                </div>
            </div>
        </div>
    </div>

    <script src="phantom-protocol/js/phantom-protocol.js"></script>
    <script src="phantom-protocol/js/phantom-utilities.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            console.log("ðŸ”¥ PHANTOM PROTOCOL HUB ACTIVE");
            initializeNavCards();
            updateUserProgress();
            setupProgressTracking();
        });

        function initializeNavCards() {
            document.querySelectorAll('.scroll-card').forEach((card, i) => {
                card.style.opacity = '0';
                card.style.transform = 'translateY(50px)';
                setTimeout(() => {
                    card.style.transition = 'all 0.5s ease';
                    card.style.opacity = '1';
                    card.style.transform = 'translateY(0)';
                }, i * 150);

                card.addEventListener('mouseenter', () => {
                    if (window.PhantomUtils) window.PhantomUtils.playSound('hover');
                });
            });
        }

        function navigateToPage(url) {
            document.body.style.opacity = '0.8';
            if (window.LearningAnalytics) window.LearningAnalytics.recordInteraction('nav', { page: url });
            if (window.PhantomUtils) window.PhantomUtils.playSound('click');
            setTimeout(() => window.location.href = url, 200);
        }

        function showComingSoon() {
            if (window.PhantomUtils)
                window.PhantomUtils.showToast("ðŸ‘‘ Kingdom Dashboard coming soon. Complete core scrolls first.", 'info', 3000);
        }

        function updateUserProgress() {
            const p = window.getLearningProgress ? window.getLearningProgress() : { level: 1, totalPoints: 0 };
            document.getElementById('user-level').textContent = `Level ${p.level} ${getLevelTitle(p.level)}`;
            document.getElementById('total-points').textContent = `${p.totalPoints} Points`;
            const c = calculateOverallCompletion();
            const el = document.getElementById('completion-status');
            el.textContent = `${c}% Complete`;
            el.style.color = c > 75 ? '#00ff88' : c > 50 ? '#ffd700' : '#ff0066';
        }

        function getLevelTitle(l) {
            const t = ["Initiate", "Apprentice", "Technician", "Specialist", "Expert", "Master", "Commander", "Emperor"];
            return t[Math.min(l - 1, t.length - 1)] || "Transcended";
        }

        function calculateOverallCompletion() {
            let completion = 0;
            const p1 = parseInt(localStorage.getItem('protocol-mastery-progress') || 0);
            completion += p1 * 0.3;
            const d = JSON.parse(localStorage.getItem('phantom-deployment-progress') || '{}');
            if (d.completedItems) completion += (d.completedItems / 24) * 100 * 0.4;
            const lp = window.getLearningProgress?.();
            if (lp?.totalPoints) completion += Math.min(lp.totalPoints / 500, 1) * 30;
            return Math.round(completion);
        }

        function setupProgressTracking() {
            setInterval(updateUserProgress, 5000);
        }
    </script>
</body>
</html>
